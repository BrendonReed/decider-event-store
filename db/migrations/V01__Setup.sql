CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

create table event_persistance (
  event_id bigint GENERATED BY DEFAULT as identity primary key,
  stream_id uuid not null,
  transaction_time timestamp not null,
  event_type text,
  payload jsonb not null
);

create table events_later (
  id bigint primary key,
  stream_id uuid not null,
  seq_no bigint not null,
  transaction_time timestamp not null,
  correlation_id uuid not null,
  payload jsonb not null
);

create table counter_state (
  total_count bigint,
  revision bigint
)